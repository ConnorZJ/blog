(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{350:function(s,a,t){"use strict";t.r(a);var n=t(2),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"spring-boot的配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-boot的配置文件"}},[s._v("#")]),s._v(" spring boot的配置文件")]),s._v(" "),t("p",[s._v("通过上一章已经了解到，springboot项目是一个约定大于配置的项目，大部分的配置，通过相关的默认处理，都已经配置好了，我们直接拿来使用即可。")]),s._v(" "),t("p",[s._v("但还是有很多种情况，我们需要自定义一些配置，来供我们业务开发的要求，比如说配置其他的数据源之类的，这个时候，就需要自己去在配置文件中定义我们所需要的东西。")]),s._v(" "),t("p",[s._v("配置文件一般分为application.properties和application.yml，一个springboot项目创建之后，在src/main/resources目录下，一般会看到一个这样的配置文件(application.properties)。")]),s._v(" "),t("p",[s._v("对于这两种文件来说，")]),s._v(" "),t("ul",[t("li",[s._v(".properties文件是以key=value的形式编写，很多种情况下，前缀大部分都相同，会造成冗余的现象。")]),s._v(" "),t("li",[s._v(".yml是一个可读性高，用来表达数据序列化的格式的文件。")])]),s._v(" "),t("p",[s._v("下面将介绍配置文件如何在项目中使用")]),s._v(" "),t("h2",{attrs:{id:"如何使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何使用"}},[s._v("#")]),s._v(" 如何使用")]),s._v(" "),t("h3",{attrs:{id:"普通注入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#普通注入"}},[s._v("#")]),s._v(" 普通注入")]),s._v(" "),t("ol",[t("li",[s._v("在application.properties中添加如下代码")])]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("person.name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("张三")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("person.age")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("18")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("person.address")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("Mars")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("在项目下创建一个javaBean，包含name，age，address属性")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Component")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@PropertySource")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"classpath:application.properties"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Person")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${person.name}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${person.age}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integer")]),s._v(" age"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${person.address}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" address"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// getters and setters")]),s._v("\n    \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("此处用了3个注解，分别是：")]),s._v(" "),t("ul",[t("li",[s._v("@Component注解用来表示这个类由spring管理，把普通的pojo类实例化到spring容器中")]),s._v(" "),t("li",[s._v("@PropertySource注解作用是加载指定的.properties文件到spring的环境之中，配合@Value使用")]),s._v(" "),t("li",[s._v("@Value注解作用是将.properties中的对应的属性的值，注入到当前使用此注解的属性上面去")])]),s._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[s._v("在controller中注入Person类，将person打印出来，看看是否能注入属性成功")])]),s._v(" "),t("p",[t("img",{attrs:{src:"http://qiniuyun.zijie.fun/image-20200331221247939.png",alt:"image-20200331221247939"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"http://qiniuyun.zijie.fun/image-20200331221611148.png",alt:"image-20200331221611148"}})]),s._v(" "),t("p",[s._v("这里能看得到，person的属性通过properties注入成功了，但是中文出现了乱码，只要在setting中把项目的编码设置成utf-8，把"),t("em",[s._v("Transparent native-to-ascii conversion")]),s._v("前面的勾勾上，再重新编辑一下properties文件即可显示正确的字符了。")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://qiniuyun.zijie.fun/image-20200331231211034.png",alt:"image-20200331231211034"}})]),s._v(" "),t("h3",{attrs:{id:"其他方式注入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他方式注入"}},[s._v("#")]),s._v(" 其他方式注入")]),s._v(" "),t("p",[s._v("上面的方法是一般情况下使用的，但是有个缺点，就是application.properties文件的属性中，person的前缀都是一样的，只是后面的名字不同，作为一个程序员，肯定要找到更加高(偷)效(懒)的方式去写呀！")]),s._v(" "),t("p",[s._v("所以这个时候介绍另一种注入的方式，首先将JavaBean中的@Value注解全都去掉，而在类名上增加一个注解@ConfigurationProperties")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://qiniuyun.zijie.fun/image-20200331232254800.png",alt:"image-20200331232254800"}})]),s._v(" "),t("p",[s._v("可以看到，这个注解的参数中，有一个prefix，顾名思义，是去properties中寻找以person为前缀的属性，注入到JavaBean中去。")]),s._v(" "),t("p",[t("strong",[s._v("注：JavaBean的属性名称必须和properties文件中的后缀保持一致")])]),s._v(" "),t("h3",{attrs:{id:"yaml文件方式注入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yaml文件方式注入"}},[s._v("#")]),s._v(" yaml文件方式注入")]),s._v(" "),t("p",[s._v("使用yaml文件做配置的话，可以替换掉application.properties，创建一个文件名为application.yml或者application.yaml的文件。")]),s._v(" "),t("p",[t("strong",[s._v("yaml配置是有序的，properties配置是无序的")])]),s._v(" "),t("p",[t("strong",[s._v("自定义的yaml文件尚不支持使用@PropertySource注解直接注入到项目之中")])]),s._v(" "),t("p",[s._v("下面来看看如何使用yaml配置")]),s._v(" "),t("ol",[t("li",[s._v("首先创建一个application.yml，语法是k: v，需要注意的是，冒号后面与值之间要有一个空格")])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8081")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("servlet")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("context-path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /connor\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("img",{attrs:{src:"http://qiniuyun.zijie.fun/image-20200331234454804.png",alt:"image-20200331234454804"}})]),s._v(" "),t("p",[s._v("启动项目之后，就能看到项目的端口号改变了，项目的context-path路径也改变了。")]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("之前说到yaml文件是有序的，那么怎么体现出它的有序呢")])]),s._v(" "),t("p",[s._v("现在再在yaml中添加一下属性")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8081")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("servlet")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("context-path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /connor\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cluster")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hosts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 192.168.0.1\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 192.168.0.2\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 192.168.0.3\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("创建一个Cluster类")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Component")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@ConfigurationProperties")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("prefix "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Cluster")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" hosts"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// getters and setters")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// toString()")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("然后在controller中注入这个类，并打印出这个对象")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://qiniuyun.zijie.fun/image-20200331235230413.png",alt:"image-20200331235230413"}})]),s._v(" "),t("p",[s._v("所以，yaml配置能够注入一个数组/集合，同时也是保持有序的方式注入。")]),s._v(" "),t("h2",{attrs:{id:"配置文件优先级"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置文件优先级"}},[s._v("#")]),s._v(" 配置文件优先级")]),s._v(" "),t("h3",{attrs:{id:"哪种文件优先级高"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#哪种文件优先级高"}},[s._v("#")]),s._v(" 哪种文件优先级高")]),s._v(" "),t("p",[s._v("如果说，我在项目路径下，同时存在着两种配置文件，分别是application.properties和application.yml，且每个文件的内容不一样，那么springboot项目启动之后，将会使用哪一个配置呢？")]),s._v(" "),t("p",[s._v("带着这个问题，我同时创建了这两个文件，且让其中的内容不一致")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("server.port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("8081")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("server.servlet.context-path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/properties")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8082")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("servlet")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("context-path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /yml\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("在properties中设置端口为8081，路径为properties，在yaml文件里设置端口为8082，路径为yml，接下来，就到了启动项目的时候了")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://qiniuyun.zijie.fun/image-20200402234512731.png",alt:"image-20200402234512731"}})]),s._v(" "),t("p",[s._v("项目启动后，可以看到，Tomcat的端口被设置成了8081，路径为properties，这样一来，就知道了在项目启动的时候，会去调用properties的配置了。")]),s._v(" "),t("p",[t("strong",[s._v("但是结果果真如此吗？")])]),s._v(" "),t("p",[s._v("在yml中，继续添加如下代码，再重新启动项目，将cluster对象打印出来")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cluster")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hosts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 192.168.0.1\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 192.168.0.2\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 192.168.0.3\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("img",{attrs:{src:"http://qiniuyun.zijie.fun/image-20200402235157255.png",alt:"image-20200402235157255"}})]),s._v(" "),t("p",[s._v("通过控制台打印可以看到，端口是8081没错，使用的是"),t("strong",[s._v("properties")]),s._v("的配置，但同时还能打印出Cluster对象的属性，这个是由"),t("strong",[s._v("yml")]),s._v("配置的。")]),s._v(" "),t("p",[s._v("至此能够得出一个结论："),t("strong",[s._v("在properties和yml配置文件同时存在的时候，项目会将这两个配置同时加载进去，但是properties的优先级比yml高，所以不同的文件下的相同的配置，优先级高的会覆盖掉优先级低的。")])]),s._v(" "),t("h2",{attrs:{id:"配置文件位置问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置文件位置问题"}},[s._v("#")]),s._v(" 配置文件位置问题")]),s._v(" "),t("h3",{attrs:{id:"配置文件那应该放在哪里呢"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置文件那应该放在哪里呢"}},[s._v("#")]),s._v(" 配置文件那应该放在哪里呢")]),s._v(" "),t("p",[s._v("springboot配置文件可以放在一下四个地方")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://qiniuyun.zijie.fun/image-20200407213856326.png",alt:"image-20200407213856326"}})]),s._v(" "),t("p",[s._v("在这几个地方放配置文件，即可用于springboot项目使用")]),s._v(" "),t("h3",{attrs:{id:"哪个地方的优先级高呢"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#哪个地方的优先级高呢"}},[s._v("#")]),s._v(" 哪个地方的优先级高呢")]),s._v(" "),t("p",[s._v("既然能放在多个地方，那么，很明显的问题就出现在了脑海中，假如我这四个文件都存在，那项目启动的时候优先加载哪里地方得配置文件呢？")]),s._v(" "),t("p",[s._v("于是我分别在这四个不同的地方，创建四个application.properties文件，然后在文件内容里面设置一个name的属性，在项目启动后，将这个name属性注入到对象中，并且打印出来，就知道哪一个优先级高，哪一个优先级低了。")]),s._v(" "),t("p",[s._v("而且打印第一个文件位置之后，将那个文件移除掉，继续重启项目，这样就能有了一个比较直观的感受——能够知道加载的顺序！")]),s._v(" "),t("p",[s._v("所以下面进行测试，打印出的顺序如下：")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[s._v("project/config/application.properties\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[s._v("project/application.properties\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[s._v("classpath/config/application.properties\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[s._v("classpath/application.properties\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("从以上结果，我们能够知道不同地方的配置文件的优先级哪一个高了！")]),s._v(" "),t("h3",{attrs:{id:"自定义配置文件位置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自定义配置文件位置"}},[s._v("#")]),s._v(" 自定义配置文件位置")]),s._v(" "),t("p",[s._v("既然不同的位置的优先级不同，那么又有一个疑问了，如果我想指定一个位置的配置生效，这该怎么做呢？")]),s._v(" "),t("p",[s._v("其实这种情况，我们可以通过命令行的方式指定某个配置文件，比如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("java -jar springboot-demo.jar --spring.config.location"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("classpath:/application.properties\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果在IDEA中启动项目的话，可以在配置启动参数的地方加上一个启动命令")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://qiniuyun.zijie.fun/image-20200407215521417.png",alt:"image-20200407215521417"}})]),s._v(" "),t("p",[s._v("这样就能通过自定义的配置文件来启动项目了。")])])}),[],!1,null,null,null);a.default=e.exports}}]);