(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{348:function(t,a,e){"use strict";e.r(a);var r=e(2),s=Object(r.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"spring-boot整合视图层"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#spring-boot整合视图层"}},[t._v("#")]),t._v(" spring boot整合视图层")]),t._v(" "),e("p",[t._v("在springMVC的项目中，与视图层交互的传统的做法是通过JSP构造页面，使用后台传来的数据再来渲染页面。然而，现如今的技术潮流里，JSP技术以及在被逐渐的淘汰了。")]),t._v(" "),e("p",[t._v("现在的主流技术里，可以通过freemarker、thymeleaf等静态模板引擎构建页面，也可以在前后端分离的项目中，使用vue、react等前端框架搭建页面。这几种技术，springboot都能够很好地支持。不过对于JSP来说，springboot也能够支持，只是使用配置起来会略显麻烦。")]),t._v(" "),e("p",[t._v("接下来我将介绍freemarker的使用。")]),t._v(" "),e("h2",{attrs:{id:"什么是freemarker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是freemarker"}},[t._v("#")]),t._v(" 什么是FreeMarker")]),t._v(" "),e("p",[t._v("FreeMarker 是一款 "),e("em",[t._v("模板引擎")]),t._v("： 即一种基于模板和要改变的数据， 并用来生成输出文本(HTML网页，电子邮件，配置文件，源代码等)的通用工具。 它不是面向最终用户的，而是一个Java类库，是一款程序员可以嵌入他们所开发产品的组件。")]),t._v(" "),e("p",[t._v("模板编写为FreeMarker Template Language (FTL)。它是简单的，专用的语言， "),e("em",[t._v("不是")]),t._v(" 像PHP那样成熟的编程语言。 那就意味着要准备数据在真实编程语言中来显示，比如数据库查询和业务运算， 之后模板显示已经准备好的数据。在模板中，你可以专注于如何展现数据， 而在模板之外可以专注于要展示什么数据。")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://freemarker.foofun.cn/figures/overview.png",alt:"Figure"}})]),t._v(" "),e("h2",{attrs:{id:"创建一个freemarker的springboot项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建一个freemarker的springboot项目"}},[t._v("#")]),t._v(" 创建一个FreeMarker的springboot项目")]),t._v(" "),e("p",[t._v("在创建springboot项目的时候，勾选web和freemarker的依赖")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://qiniuyun.zijie.fun/image-20200408215424281.png",alt:"image-20200408215424281"}})]),t._v(" "),e("p",[t._v("创建成功后，在pom中主要是用到了两个依赖")]),t._v(" "),e("div",{staticClass:"language-xml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-xml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.boot"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-boot-starter-freemarker"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.boot"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-boot-starter-web"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])]),e("p",[t._v("FreeMarker在springboot中自动化配置生效主要靠FreeMarkerAutoConfiguration类，在这个类之中，可以看到注解中有一个**@ConditionalOnClass({freemarker.template.Configuration.class, FreeMarkerConfigurationFactory.class})"),e("strong",[t._v("，表示当前配置只有在")]),t._v("freemarker.template.Configuration"),e("strong",[t._v("和")]),t._v("FreeMarkerConfigurationFactory"),e("strong",[t._v("存在的情况下才生效，还有一个注解是")]),t._v("@Import({FreeMarkerServletWebConfiguration.class, FreeMarkerReactiveWebConfiguration.class, FreeMarkerNonWebConfiguration.class})**，表示freemarker可以用在servlet web，reactive web和非web的项目下。")]),t._v(" "),e("p",[t._v("我们这个项目很明显是一个servlet web项目，点击"),e("strong",[t._v("FreeMarkerServletWebConfiguration")]),t._v("类看里面的源码，可以看到他的构造方法里，set进去了一个"),e("strong",[t._v("FreeMarkerProperties")]),t._v("的对象，打开这个对象一看：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://qiniuyun.zijie.fun/image-20200408222859955.png",alt:"image-20200408222859955"}})]),t._v(" "),e("p",[t._v("就能够恍然大悟，配置都是在这里写好了的：")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("注解里面写了前缀为spring.freemarker，如果要自定义更改，则在application.properties中配置相应的属性")])]),t._v(" "),e("li",[e("p",[t._v("DEFAULT_TEMPLATE_LOADER_PATH表示freemarker的默认模板放在classpath:/templates中，在application.properties同级目录下，能够看到这一个templates文件夹，只要把静态文件放在这个里面，springboot就能够读取到这个的模板了")])]),t._v(" "),e("li",[e("p",[t._v("DEFAULT_SUFFIX表示默认的模板文件名的后缀，在springboot 2.2.0以前，freemarker的默认后缀名是ftl，之后则改为了ftlh，据说是这样使用更加的安全。")]),t._v(" "),e("p",[t._v("............")])])]),t._v(" "),e("h2",{attrs:{id:"开始使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开始使用"}},[t._v("#")]),t._v(" 开始使用")]),t._v(" "),e("p",[t._v("下面我将来写个例子，看看springboot中如何使用freemarker")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("首先创建一个bean，给他一些属性，用于在页面上显示")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://qiniuyun.zijie.fun/image-20200408223650676.png",alt:"image-20200408223650676"}})])]),t._v(" "),e("li",[e("p",[t._v("接下来创建一个controller，并在里面创建若干个Person对象，给每一个对象赋值，并将其加到Model里面，以便能够返回到页面上")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://qiniuyun.zijie.fun/image-20200408224310100.png",alt:"image-20200408224310100"}})])]),t._v(" "),e("li",[e("p",[t._v("接下来就到了重头戏了，在templates文件夹下创建模板文件---person.ftlh")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://qiniuyun.zijie.fun/image-20200408225848639.png",alt:"image-20200408225848639"}})]),t._v(" "),e("p",[t._v("在freemarker里面，使用#list的标签可以循环对象，在里面使用EL表达式，取出对象里的值")])]),t._v(" "),e("li",[e("p",[t._v("更多的freemarker标签可以 "),e("a",{attrs:{href:"http://freemarker.foofun.cn/dgui.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击此处"),e("OutboundLink")],1)])])]),t._v(" "),e("h2",{attrs:{id:"更多配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更多配置"}},[t._v("#")]),t._v(" 更多配置")])])}),[],!1,null,null,null);a.default=s.exports}}]);